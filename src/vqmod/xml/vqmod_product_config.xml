<modification>
	<id>Product configurate</id>
	<version>1.5.x</version>
	<vqmver>2.1.6</vqmver>
	<author>Dimyan</author>
    <file name="catalog/controller/product/product.php">
        <operation>
            <search position="replace"><![CDATA[
            'href'      => $this->url->link('common/home'),
            ]]></search>
            <add><![CDATA[
            'href'      => '',
            ]]></add>
        </operation>
    </file>

	<file name="catalog/controller/product/category.php">
        <operation>
            <search position="before"><![CDATA[
            $this->data['products'][] = array(
            ]]></search>
            <add><![CDATA[
			//long description start//
            $cut_descr_symbols = 400;
            $descr_plaintext = strip_tags(html_entity_decode($result['description'],ENT_QUOTES, 'UTF-8'));
            if( mb_strlen($descr_plaintext, 'UTF-8') > $cut_descr_symbols )
            {
            	$descr_plaintext = mb_substr($descr_plaintext, 0, $cut_descr_symbols, 'UTF-8') . '&nbsp;&hellip;';
            }
			//long description end//
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            'description' => utf8_substr(strip_tags(html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8')), 0, 100) . '..',
            ]]></search>
            <add><![CDATA[
			//long description start//
			'description' => $descr_plaintext,
			//long description end//
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            'href'      => $this->url->link('common/home'),
            ]]></search>
            <add><![CDATA[
            'href'      => '',
            ]]></add>
        </operation>
	</file>

    <file name="/catalog/controller/product/manufacturer.php">
        <operation>
            <search position="before"><![CDATA[
            $this->data['products'][] = array(
            ]]></search>
            <add><![CDATA[
            //long description start//
            $cut_descr_symbols = 400;
            $descr_plaintext = strip_tags(html_entity_decode($result['description'],ENT_QUOTES, 'UTF-8'));
            if( mb_strlen($descr_plaintext, 'UTF-8') > $cut_descr_symbols )
            {
                $descr_plaintext = mb_substr($descr_plaintext, 0, $cut_descr_symbols, 'UTF-8') . '&nbsp;&hellip;';
            }
            //long description end//
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            'description' => utf8_substr(strip_tags(html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8')), 0, 100) . '..',
            ]]></search>
            <add><![CDATA[
            //long description start//
            'description' => $descr_plaintext,
            //long description end//
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            'href'      => $this->url->link('common/home'),
            ]]></search>
            <add><![CDATA[
            'href'      => '',
            ]]></add>
        </operation>
    </file>


    <file name="/catalog/controller/product/compare.php">
        <operation>
            <search position="before"><![CDATA[
            $this->data['products'][$product_id] = array(
            ]]></search>
            <add><![CDATA[
            //long description start//
            $cut_descr_symbols = 2000;
            $descr_plaintext = strip_tags(html_entity_decode($product_info['description'],ENT_QUOTES, 'UTF-8'));
            if( mb_strlen($descr_plaintext, 'UTF-8') > $cut_descr_symbols )
            {
                $descr_plaintext = mb_substr($descr_plaintext, 0, $cut_descr_symbols, 'UTF-8') . '&nbsp;&hellip;';
            }
            //long description end//
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            'description'  => utf8_substr(strip_tags(html_entity_decode($product_info['description'], ENT_QUOTES, 'UTF-8')), 0, 200) . '..',
            ]]></search>
            <add><![CDATA[
            //long description start//
            'description' => $descr_plaintext,
            //long description end//
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            'href'      => $this->url->link('common/home'),
            ]]></search>
            <add><![CDATA[
            'href'      => '',
            ]]></add>
        </operation>
    </file>

    <file name="/catalog/controller/product/search.php">
        <operation>
            <search position="before"><![CDATA[
            $this->data['products'][] = array(
            ]]></search>
            <add><![CDATA[
            //long description start//
            $cut_descr_symbols = 400;
            $descr_plaintext = strip_tags(html_entity_decode($result['description'],ENT_QUOTES, 'UTF-8'));
            if( mb_strlen($descr_plaintext, 'UTF-8') > $cut_descr_symbols )
            {
                $descr_plaintext = mb_substr($descr_plaintext, 0, $cut_descr_symbols, 'UTF-8') . '&nbsp;&hellip;';
            }
            //long description end//
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            'description' => utf8_substr(strip_tags(html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8')), 0, 100) . '..',
            ]]></search>
            <add><![CDATA[
            //long description start//
            'description' => $descr_plaintext,
            //long description end//
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            'href'      => $this->url->link('common/home'),
            ]]></search>
            <add><![CDATA[
            'href'      => '',
            ]]></add>
        </operation>
    </file>

    <file name="/catalog/controller/product/special.php">
        <operation>
            <search position="before"><![CDATA[
            $this->data['products'][] = array(
            ]]></search>
            <add><![CDATA[
            //long description start//
            $cut_descr_symbols = 400;
            $descr_plaintext = strip_tags(html_entity_decode($result['description'],ENT_QUOTES, 'UTF-8'));
            if( mb_strlen($descr_plaintext, 'UTF-8') > $cut_descr_symbols )
            {
                $descr_plaintext = mb_substr($descr_plaintext, 0, $cut_descr_symbols, 'UTF-8') . '&nbsp;&hellip;';
            }
            //long description end//
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            'description' => utf8_substr(strip_tags(html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8')), 0, 100) . '..',
            ]]></search>
            <add><![CDATA[
            //long description start//
            'description' => $descr_plaintext,
            //long description end//
            ]]></add>
        </operation>

        <operation>
            <search position="replace"><![CDATA[
            'href'      => $this->url->link('common/home'),
            ]]></search>
            <add><![CDATA[
            'href'      => '',
            ]]></add>
        </operation>
    </file>
</modification>